<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="nc7.mapp.dao.CommentDao">

  <resultMap type="nc7.mapp.vo.Comment" id="commentMap">
    <id column="comments_no" property="no"/>
    <result column="users_no" property="userNo"/>
    <result column="films_no" property="filmNo"/>
    <result column="contents" property="contents"/>
    <result column="add_at" property="addedAt"/>
    <result column="state" property="state"/>
  </resultMap>

  <insert id="insert" parameterType="nc7.mapp.vo.Comment">
    INSERT INTO comments(users_no, films_no, contents, add_at, state)
    VALUES (#{userNo}, #{filmNo}, #{contents}, #{addedAt}, #{state})
  </insert>

  <select id="findAll" resultMap="commentMap">
    SELECT comments_no, users_no, films_no, contents, add_at, state
    FROM comments
    WHERE films_no = #{filmNo}
  </select>

  <select id="findBy" parameterType="int" resultMap="commentMap">
    SELECT comments_no, users_no, films_no, contents, add_at, state
    FROM comments
    WHERE comments_no = #{commentsNo}
  </select>

  <update id="update" parameterType="nc7.mapp.vo.Comment">
    UPDATE comments
    SET contents = #{contents}, state = #{state}
    WHERE comments_no = #{no}
  </update>

  <delete id="delete" parameterType="int">
    DELETE FROM comments
    WHERE comments_no = #{commentsNo}
  </delete>

</mapper>
